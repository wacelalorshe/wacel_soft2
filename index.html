<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام محاسبة المتاجر</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>نظام محاسبة المتاجر</h1>
            <div id="userInfo" class="user-info" style="display: none;">
                <span id="userEmail"></span>
                <button onclick="logout()">تسجيل الخروج</button>
            </div>
        </header>

        <!-- شاشة التسجيل -->
        <div id="authSection" class="auth-section">
            <div class="auth-form">
                <h2>تسجيل الدخول</h2>
                <input type="email" id="email" placeholder="البريد الإلكتروني">
                <input type="password" id="password" placeholder="كلمة المرور">
                <button onclick="login()">تسجيل الدخول</button>
                <button onclick="signup()">إنشاء حساب جديد</button>
            </div>
        </div>

        <!-- الشاشة الرئيسية -->
        <div id="mainApp" class="main-app" style="display: none;">
            <nav class="tabs">
                <button class="tab-link active" onclick="openTab('dashboard')">لوحة التحكم</button>
                <button class="tab-link" onclick="openTab('sales')">المبيعات</button>
                <button class="tab-link" onclick="openTab('expenses')">المصروفات</button>
                <button class="tab-link" onclick="openTab('inventory')">المخزون</button>
                <button class="tab-link" onclick="openTab('reports')">التقارير</button>
            </nav>

            <!-- لوحة التحكم -->
            <div id="dashboard" class="tab-content active">
                <h2>لوحة التحكم</h2>
                <div class="stats">
                    <div class="stat-card">
                        <h3>الإيرادات اليوم</h3>
                        <span id="todayRevenue">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>المصروفات اليوم</h3>
                        <span id="todayExpenses">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>صافي الربح</h3>
                        <span id="netProfit">0</span>
                    </div>
                </div>
            </div>

            <!-- إدارة المبيعات -->
            <div id="sales" class="tab-content">
                <h2>إدارة المبيعات</h2>
                <div class="form-section">
                    <h3>تسجيل بيع جديد</h3>
                    <input type="text" id="productName" placeholder="اسم المنتج">
                    <input type="number" id="saleAmount" placeholder="المبلغ">
                    <input type="number" id="saleQuantity" placeholder="الكمية" value="1">
                    <button onclick="addSale()">إضافة البيع</button>
                </div>
                <div class="list-section">
                    <h3>سجل المبيعات</h3>
                    <div id="salesList"></div>
                </div>
            </div>

            <!-- إدارة المصروفات -->
            <div id="expenses" class="tab-content">
                <h2>إدارة المصروفات</h2>
                <div class="form-section">
                    <h3>تسجيل مصروف جديد</h3>
                    <input type="text" id="expenseDescription" placeholder="وصف المصروف">
                    <input type="number" id="expenseAmount" placeholder="المبلغ">
                    <select id="expenseCategory">
                        <option value="operational">تشغيلي</option>
                        <option value="inventory">بضاعة</option>
                        <option value="utilities">مرافق</option>
                        <option value="other">أخرى</option>
                    </select>
                    <button onclick="addExpense()">إضافة المصروف</button>
                </div>
                <div class="list-section">
                    <h3>سجل المصروفات</h3>
                    <div id="expensesList"></div>
                </div>
            </div>

            <!-- إدارة المخزون -->
            <div id="inventory" class="tab-content">
                <h2>إدارة المخزون</h2>
                <div class="form-section">
                    <h3>إضافة منتج جديد</h3>
                    <input type="text" id="inventoryName" placeholder="اسم المنتج">
                    <input type="number" id="inventoryPrice" placeholder="سعر الشراء">
                    <input type="number" id="inventorySalePrice" placeholder="سعر البيع">
                    <input type="number" id="inventoryQuantity" placeholder="الكمية">
                    <input type="number" id="inventoryMinQuantity" placeholder="الحد الأدنى" value="5">
                    <button onclick="addInventoryItem()">إضافة المنتج</button>
                </div>
                <div class="list-section">
                    <h3>قائمة المنتجات</h3>
                    <div id="inventoryList"></div>
                </div>
            </div>

            <!-- التقارير -->
            <div id="reports" class="tab-content">
                <h2>التقارير</h2>
                <div class="reports-section">
                    <div class="report-card">
                        <h3>تقرير الأرباح والخسائر</h3>
                        <div id="profitLossReport"></div>
                    </div>
                    <div class="report-card">
                        <h3>أعلى المنتجات مبيعاً</h3>
                        <div id="topProductsReport"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
